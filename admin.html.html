<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>âš™ï¸ å®¶é•·ç®¡ç†å¾Œå°</title>
    <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore-compat.js"></script>
    <style>
        body { font-family: sans-serif; padding: 20px; background: #333; color: white; }
        .user-card { background: #444; margin: 10px 0; padding: 15px; border-radius: 8px; border-left: 5px solid #4CAF50; }
        .btn { padding: 5px 10px; cursor: pointer; border: none; border-radius: 4px; margin-left: 5px; }
        .btn-add { background: #4CAF50; color: white; }
        .btn-del { background: #f44336; color: white; }
        input { padding: 5px; border-radius: 4px; border: none; }
    </style>
</head>
<body>
    <h1>âš™ï¸ å®¶é•·éŠ€è¡Œæ§åˆ¶å°</h1>
    <div id="userList">è¼‰å…¥ä¸­...</div>

    <script>
        // ğŸ”´ é€™è£¡ä¹Ÿè¦è²¼ä¸Šä½ çš„ Firebase Config
        const firebaseConfig = {
  apiKey: "AIzaSyA84BEQc_szhvmbVlxVR_mXnCQ0E4auqTg",
  authDomain: "hago-award-system.firebaseapp.com",
  projectId: "hago-award-system",
  storageBucket: "hago-award-system.firebasestorage.app",
  messagingSenderId: "959940017225",
  appId: "1:959940017225:web:85a36866320f53638f5398",
  measurementId: "G-HRS8GBGJ89"
};

        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();

        // ç›£è½æ‰€æœ‰ä½¿ç”¨è€…çš„è®ŠåŒ– (å³æ™‚æ›´æ–°)
        db.collection("users").onSnapshot((snapshot) => {
            const list = document.getElementById('userList');
            list.innerHTML = "";
            
            snapshot.forEach(doc => {
                const user = doc.data();
                const div = document.createElement('div');
                div.className = 'user-card';
                div.innerHTML = `
                    <h3>${user.name} <span style="font-size:14px; color:#aaa">(${doc.id})</span></h3>
                    <p>ğŸ’° ç›®å‰å­˜æ¬¾: <strong>${user.points}</strong></p>
                    <div>
                        <button class="btn btn-add" onclick="addPoints('${doc.id}', 100)">+100</button>
                        <button class="btn btn-add" onclick="addPoints('${doc.id}', 500)">+500</button>
                        <button class="btn btn-del" onclick="resetPoints('${doc.id}')">æ­¸é›¶</button>
                    </div>
                `;
                list.appendChild(div);
            });
        });

        // ç™¼éŒ¢åŠŸèƒ½
        function addPoints(docId, amount) {
            const ref = db.collection("users").doc(docId);
            ref.update({
                points: firebase.firestore.FieldValue.increment(amount)
            }).then(() => alert("ç™¼éŒ¢æˆåŠŸï¼")); // å…¶å¯¦ä¸ç”¨ alertï¼Œç•«é¢æœƒè‡ªå·±è·³
        }

        // æ­¸é›¶åŠŸèƒ½ (æ‡²ç½°ç”¨?)
        function resetPoints(docId) {
            if(confirm("ç¢ºå®šè¦æ­¸é›¶å—ï¼Ÿ")) {
                db.collection("users").doc(docId).update({ points: 0 });
            }
        }
    </script>
</body>
</html>